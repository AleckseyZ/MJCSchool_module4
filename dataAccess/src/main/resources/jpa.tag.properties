jpa.tag.idParam=tagId
jpa.tag.nameParam=name
jpa.native.specialSql=SELECT TAG_ID, TAGS.NAME, TAGS.LAST_UPDATE FROM TAGS JOIN CERTIFICATES_TAGS USING(TAG_ID) JOIN CERTIFICATES USING(CERTIFICATE_ID) WHERE CERTIFICATE_ID IN (SELECT CERTIFICATE_ID FROM ORDERS WHERE USER_ID = (SELECT USER_ID FROM ORDERS WHERE IS_REFUNDED = FALSE GROUP BY USER_ID ORDER BY SUM(PURCHASE_PRICE) DESC LIMIT 1) AND IS_REFUNDED = FALSE) GROUP BY TAG_ID ORDER BY COUNT(TAG_ID) DESC LIMIT 1